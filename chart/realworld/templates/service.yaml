apiVersion: v1
kind: Service 
metadata:
  name: {{ .Release.Name}}-service
  namespace: {{ .Values.realworld.namespace | default "default"}}
spec:
  selector:
    app.kubernetes.io/name: {{ .Release.Name }}
  ports:
    {{- with .Values.realworld.service}}
    - protocol: TCP
      port: {{ .port | default "8000"}}
      targetPort: 8000
      nodePort: {{ .nodePort | default "32000" }}
    {{- end}}
  type: NodePort
